unit SDIMAIN;

interface

uses Winapi.Windows, System.Classes, Vcl.Graphics, Vcl.Forms, Vcl.Controls,
  Vcl.Menus, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Vcl.ExtCtrls, Vcl.ComCtrls,
  Vcl.ImgList, Vcl.StdActns, Vcl.ActnList, Vcl.ToolWin, Data.DB, Vcl.Grids,
  Vcl.DBGrids, Vcl.DBCtrls;

type
  TSDIAppForm = class(TForm)
    Panel1: TPanel;
    DBNavigator1: TDBNavigator;
    DBGrid1: TDBGrid;
    DBGrid2: TDBGrid;
    DBGrid3: TDBGrid;
    Panel2: TPanel;
    ComboBox2: TComboBox;
    Edit1: TEdit;
    Label1: TLabel;
    ComboBox1: TComboBox;
    Button1: TButton;
    procedure FileNew1Execute(Sender: TObject);
    procedure FileExit1Execute(Sender: TObject);
    procedure FormActivate(Sender: TObject);
    procedure ComboBox1Change(Sender: TObject);
    procedure ComboBox1Click(Sender: TObject);
    procedure Edit1Change(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  SDIAppForm: TSDIAppForm;

implementation

uses About, Unit1;

{$R *.dfm}

procedure TSDIAppForm.FileNew1Execute(Sender: TObject);
begin
  { Do nothing }
end;

procedure TSDIAppForm.FormActivate(Sender: TObject);
begin
  ComboBox1.ItemIndex:=0;
  ComboBox2.ItemIndex:=0;
  DBGrid1.Visible:=true;
  // при запуске будет отображаться таблица Футболисты
  DBNavigator1.DataSource:=DataModule1.DSfootballer; // настраиваем навигатор для работы с таблицей Футболисты
  DBGrid1.Columns[0].Width:=150;
  DBGrid1.Columns[1].Width:=150;
  DBGrid1.Columns[2].Width:=150;
  DBGrid2.Columns[0].Width:=150;
  DBGrid2.Columns[1].Width:=150;
  DBGrid3.Columns[0].Width:=150;
  DBGrid3.Columns[1].Width:=150;

  Combobox2.Items.Clear; //очищаем поля Combobox2
  Combobox2.Items.Create;//создаем и добавляем новые поля по которым в последствии может быть произведен поиск
  Combobox2.Items.Add('Имя');
  Combobox2.Items.Add('Сборная');
  Combobox2.Items.Add('Клуб');
  Combobox2.ItemIndex:=0;
end;

procedure TSDIAppForm.ComboBox1Change(Sender: TObject);
begin
  if ComboBox1.ItemIndex=0 then  // если Item=Футболисты
  begin
    DBGrid1.Visible:=false;
    // отображаем таблицу Футболисты
    DBGrid2.Visible:=false;
    // скрывает таблицу Сборные
    DBGrid3.Visible:=true;
    // скрывает таблицу Клубы
    DBNavigator1.DataSource:=DataModule1.DSfootballer;  //навигатор работает для таблицы футболисты
    Combobox2.Items.Clear; //очищаем поля Combobox2
    Combobox2.Items.Create;//создаем и добавляем новые поля по которым в последствии может быть произведен поиск
    Combobox2.Items.Add('Имя');
    Combobox2.Items.Add('Сборная');
    Combobox2.Items.Add('Клуб');
    Combobox2.ItemIndex:=0;
  end;
  if ComboBox1.ItemIndex=1 then //аналогично для таблицы Сборные
  begin
    DBGrid2.Visible:=true;
    DBGrid1.Visible:=false;
    DBGrid3.Visible:=false;
    DBNavigator1.DataSource:=DataModule1.DSnatteam;
    Combobox2.Items.Clear;
    Combobox2.Items.Create;
    Combobox2.Items.Add('Сборная');
    Combobox2.Items.Add('Место');
    Combobox2.ItemIndex:=0;
  end;
  if ComboBox1.ItemIndex=2 then //аналогично для таблицы Клубы
  begin
    DBGrid3.Visible:=false;
    DBGrid2.Visible:=false;
    DBGrid1.Visible:=true;
    DBNavigator1.DataSource:=DataModule1.DSclub;
    Combobox2.Items.Clear;
    Combobox2.Items.Create;
    Combobox2.Items.Add('Клуб');
    Combobox2.Items.Add('Место');
    Combobox2.ItemIndex:=0;
  end;
end;


procedure TSDIAppForm.ComboBox1Click(Sender: TObject);
begin
  //StaticText1.Caption := 'Hello';
end;

procedure TSDIAppForm.Edit1Change(Sender: TObject);
begin
  if Combobox1.ItemIndex=0 then
  begin //если это таблица Футболисты
    if Edit1.Text <> '' then
    begin //если поисковая строка не пуста
      DataModule1.Tfootballer.Filtered:=false; //сначала отключаем фильтрацию
      DataModule1.ed:=Edit1.Text; //передаем в переменную ed текст в поисковой строке
      DataModule1.Tfootballer.Filtered:=true; // затем включаем фильтрацию
    end
    else
      DataModule1.Tfootballer.Filtered:=false; //иначе отключаем фильтрацию.
  end
  else   if Combobox1.ItemIndex=1 then
  begin //аналогично если таблица Сборные
    if Edit1.Text <> '' then
    begin
      DataModule1.Tnatteam.Filtered:=false;
      DataModule1.ed:=Edit1.Text;
      DataModule1.Tnatteam.Filtered:=true;
    end
    else
      DataModule1.Tnatteam.Filtered:=false;
  end
  else   if Combobox1.ItemIndex=2 then
  begin //аналогично если таблица Клубы
    if Edit1.Text <> '' then
    begin
      DataModule1.Tclub.Filtered:=false;
      DataModule1.ed:=Edit1.Text;
      DataModule1.Tclub.Filtered:=true;
    end
    else
      DataModule1.Tclub.Filtered:=false;
  end;
end;

procedure TSDIAppForm.FileExit1Execute(Sender: TObject);
begin
  Close;
end;


end.
